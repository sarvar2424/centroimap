<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shafran Group — Простое описание команды и расходов (RU/UZ)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'SF Pro Display',sans-serif;background:linear-gradient(135deg,#0f0f0f 0%,#1a1a1a 30%,#2d2d2d 60%,#1a1a1a 100%);color:#fff;overflow-x:hidden;position:relative;-webkit-font-smoothing:antialiased;}
/* Background blobs */
.ios-bg{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;overflow:hidden;}
.blob{position:absolute;border-radius:50%;filter:blur(100px);opacity:.15;animation:float 25s ease-in-out infinite;}
.blob1{width:600px;height:600px;background:radial-gradient(circle,#ffffff,#e0e0e0);top:-150px;left:-150px;animation-delay:0s;}
.blob2{width:500px;height:500px;background:radial-gradient(circle,#d4d4d4,#9e9e9e);bottom:-150px;right:-150px;animation-delay:-12s;}
.blob3{width:550px;height:550px;background:radial-gradient(circle,#f5f5f5,#bdbdbd);top:50%;left:50%;transform:translate(-50%,-50%);animation-delay:-6s;}
@keyframes float{0%,100%{transform:translate(0,0) scale(1);}33%{transform:translate(120px,-100px) scale(1.15);}66%{transform:translate(-100px,120px) scale(0.85);}}
/* Subtle grid */
.glass-grid{position:fixed;top:0;left:0;width:100%;height:100%;background-image:linear-gradient(rgba(255,255,255,0.025) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.025) 1px,transparent 1px);background-size:60px 60px;z-index:1;pointer-events:none;}
/* Language switcher */
.language-switcher{position:fixed;top:24px;right:36px;z-index:101;display:flex;gap:8px;background:rgba(20,20,20,0.8);backdrop-filter:blur(30px);border-radius:50px;padding:6px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 8px 24px rgba(0,0,0,0.6);}
.lang-btn{padding:8px 20px;border:none;background:transparent;color:rgba(255,255,255,0.6);font-size:14px;font-weight:600;cursor:pointer;border-radius:50px;transition:all .3s cubic-bezier(0.16,1,0.3,1);letter-spacing:.5px;}
.lang-btn:hover{color:rgba(255,255,255,0.9);}
.lang-btn.active{background:rgba(255,255,255,0.15);color:#fff;box-shadow:0 4px 12px rgba(255,255,255,0.1);}
/* Container / slides */
.container{position:relative;z-index:2;scroll-snap-type:y mandatory;overflow-y:scroll;height:100vh;scroll-behavior:smooth;}
.container::-webkit-scrollbar{width:0;}
.slide{min-height:100vh;display:flex;align-items:center;justify-content:center;scroll-snap-align:start;padding:4rem 2rem;position:relative;}
.content{max-width:1200px;width:100%;opacity:0;transform:translateY(40px) scale(0.96);animation:slideIn 1s cubic-bezier(0.16,1,0.3,1) forwards;}
@keyframes slideIn{to{opacity:1;transform:translateY(0) scale(1);}}
/* Glass cards */
.glass-card{background:rgba(255,255,255,0.06);backdrop-filter:blur(50px) saturate(180%);-webkit-backdrop-filter:blur(50px) saturate(180%);border:1px solid rgba(255,255,255,0.15);border-radius:32px;padding:60px;margin-bottom:40px;box-shadow:0 25px 80px rgba(0,0,0,0.4),0 2px 4px rgba(255,255,255,0.1) inset,0 -2px 4px rgba(0,0,0,0.2) inset;transition:all .5s cubic-bezier(0.16,1,0.3,1);position:relative;overflow:hidden;}
.glass-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.4),transparent);}
.glass-card::after{content:'';position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,0.03) 0%,transparent 70%);animation:shimmer 8s ease-in-out infinite;pointer-events:none;}
@keyframes shimmer{0%,100%{transform:scale(1) rotate(0deg);opacity:.3;}50%{transform:scale(1.3) rotate(180deg);opacity:.6;}}
.glass-card:hover{transform:translateY(-10px) scale(1.01);border-color:rgba(255,255,255,0.25);background:rgba(255,255,255,0.08);box-shadow:0 35px 100px rgba(0,0,0,0.5),0 3px 6px rgba(255,255,255,0.15) inset,0 -3px 6px rgba(0,0,0,0.25) inset;}
/* Titles */
.section-title{font-size:clamp(2.2rem,6vw,4.2rem);font-weight:800;letter-spacing:-.04em;margin-bottom:40px;background:linear-gradient(135deg,#fff 0%,#d0d0d0 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;filter:drop-shadow(0 0 30px rgba(255,255,255,0.2));display:flex;align-items:center;gap:20px;animation:fadeInUp .8s ease-out;}
@keyframes fadeInUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}
.section-number{display:inline-flex;align-items:center;justify-content:center;width:70px;height:70px;background:linear-gradient(135deg,rgba(255,255,255,0.15) 0%,rgba(255,255,255,0.05) 100%);border:1.5px solid rgba(255,255,255,0.2);border-radius:18px;font-size:28px;font-weight:700;backdrop-filter:blur(20px);box-shadow:0 8px 32px rgba(0,0,0,0.2);transition:all .3s ease;}
.section-number:hover{transform:scale(1.1) rotate(5deg);}
.text{color:rgba(255,255,255,0.78);text-align:justify;margin-bottom:18px;font-size:17px;font-weight:400;line-height:1.9;letter-spacing:-.01em;}
.icon{width:26px;height:26px;opacity:.85;transition:all .3s ease;vertical-align:-4px;}
/* Highlight and budget blocks */
.highlight-box{background:linear-gradient(135deg,rgba(255,255,255,0.12) 0%,rgba(255,255,255,0.06) 100%);backdrop-filter:blur(30px);border:1.5px solid rgba(255,255,255,0.2);border-radius:20px;padding:24px 28px;margin:8px 0 28px 0;font-size:18px;font-weight:500;color:rgba(255,255,255,0.95);box-shadow:0 15px 50px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.15);display:flex;gap:12px;align-items:center;}
.budget-item{background:rgba(255,255,255,0.04);backdrop-filter:blur(30px);border:1px solid rgba(255,255,255,0.12);border-radius:20px;padding:22px 28px;margin:14px 0;display:flex;justify-content:space-between;align-items:center;transition:all .4s cubic-bezier(0.16,1,0.3,1);position:relative;overflow:hidden;}
.budget-item::before{content:'';position:absolute;left:0;top:0;width:4px;height:100%;background:linear-gradient(180deg,rgba(255,255,255,0.5),rgba(255,255,255,0.1));transform:scaleY(0);transition:transform .3s ease;}
.budget-item:hover::before{transform:scaleY(1);}
.budget-item:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.25);transform:translateX(12px);box-shadow:0 15px 50px rgba(0,0,0,0.3);}
.budget-title{font-weight:600;color:rgba(255,255,255,0.9);font-size:16px;display:flex;align-items:center;gap:12px;letter-spacing:-.01em;}
.budget-amount{font-size:28px;font-weight:800;background:linear-gradient(135deg,#fff 0%,#c0c0c0 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.02em;}
.total-box{background:linear-gradient(135deg,rgba(255,255,255,0.15) 0%,rgba(255,255,255,0.08) 100%);backdrop-filter:blur(40px);border:2px solid rgba(255,255,255,0.25);border-radius:24px;padding:32px 40px;margin:28px 0;display:flex;justify-content:space-between;align-items:center;box-shadow:0 20px 70px rgba(0,0,0,0.3),inset 0 2px 0 rgba(255,255,255,0.15);transition:all .4s ease;}
.total-box:hover{transform:scale(1.02);background:linear-gradient(135deg,rgba(255,255,255,0.18) 0%,rgba(255,255,255,0.1) 100%);}
.total-label{font-size:18px;font-weight:700;color:rgba(255,255,255,0.95);letter-spacing:-.01em;display:flex;align-items:center;gap:10px;}
.total-amount{font-size:44px;font-weight:800;background:linear-gradient(135deg,#fff 0%,#d0d0d0 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.03em;}
/* Dynamic Island & progress ring */
.dynamic-island{position:fixed;top:24px;left:50%;transform:translateX(-50%);padding:10px 24px;background:rgba(20,20,20,0.8);backdrop-filter:blur(30px);border-radius:50px;border:1px solid rgba(255,255,255,0.15);z-index:100;font-size:14px;color:rgba(255,255,255,0.85);font-weight:600;box-shadow:0 8px 24px rgba(0,0,0,0.6);transition:all .3s cubic-bezier(0.16,1,0.3,1);letter-spacing:.5px;}
.dynamic-island:hover{background:rgba(30,30,30,0.9);padding:10px 30px;transform:translateX(-50%) scale(1.05);}
.progress-ring{position:fixed;bottom:36px;right:36px;width:70px;height:70px;z-index:100;}
.progress-ring-circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%;}
.progress-ring-bg{background:rgba(20,20,20,0.6);backdrop-filter:blur(30px);border-radius:50%;width:70px;height:70px;display:flex;align-items:center;justify-content:center;font-size:14px;color:rgba(255,255,255,0.8);font-weight:700;border:1px solid rgba(255,255,255,0.2);box-shadow:0 8px 24px rgba(0,0,0,0.4);transition:all .3s ease;}
.progress-ring-bg:hover{transform:scale(1.1);background:rgba(30,30,30,0.7);}
/* Tables */
.table-wrap{overflow-x:auto;}
.glass-table{width:100%;border-collapse:separate;border-spacing:0 12px;font-size:14px;color:#fff;}
.glass-table thead th{background:rgba(255,255,255,0.1);padding:12px 14px;text-align:left;font-size:12px;text-transform:uppercase;letter-spacing:.06em;color:rgba(255,255,255,0.8);}
.glass-table thead th.left{border-top-left-radius:12px;border-bottom-left-radius:12px;}
.glass-table thead th.right{border-top-right-radius:12px;border-bottom-right-radius:12px;text-align:right;}
.glass-table tbody tr{background:rgba(255,255,255,0.05);}
.glass-table tbody tr td{padding:12px 14px;}
.glass-table tbody tr td.left{border-top-left-radius:12px;border-bottom-left-radius:12px;}
.glass-table tbody tr td.right{text-align:right;border-top-right-radius:12px;border-bottom-right-radius:12px;}
.glass-table tbody tr .muted{opacity:.75;}
.glass-table tbody tr.total{background:rgba(255,255,255,0.10);font-weight:700;}
.glass-table tbody tr.total td{padding:14px;}
/* Responsive */
@media(max-width:768px){
  .slide{padding:3rem 1.5rem;}
  .glass-card{padding:40px 30px;}
  .section-title{font-size:2.4rem;}
  .dynamic-island{font-size:13px;padding:10px 20px;}
  .language-switcher{top:80px;right:20px;}
}
  </style>
</head>
<body>
  <!-- Background -->
  <div class="ios-bg">
    <div class="blob blob1"></div>
    <div class="blob blob2"></div>
    <div class="blob blob3"></div>
  </div>
  <div class="glass-grid"></div>

  <!-- Language Switcher -->
  <div class="language-switcher">
    <button class="lang-btn" data-lang="UZ">O'zbek</button>
    <button class="lang-btn active" data-lang="RU">Русский</button>
  </div>

  <!-- Dynamic Island -->
  <div class="dynamic-island" id="slideIndicator">01 / 07</div>

  <!-- Progress Ring -->
  <div class="progress-ring">
    <div class="progress-ring-bg">
      <svg width="70" height="70" style="position:absolute">
        <circle id="progressCircle" class="progress-ring-circle" stroke="#ffffff" stroke-width="3" fill="transparent" r="31" cx="35" cy="35" />
      </svg>
      <span id="progressText">0%</span>
    </div>
  </div>

  <!-- Slides Container -->
  <div class="container" id="container">
    <div id="slidesRoot"></div>
  </div>

  <script>
const usd = (n) => "$" + Number(n).toLocaleString('en-US', { maximumFractionDigits: 0 });

function buildData(lang) {
  const t = lang === 'RU' ? {
    title: 'Shafran Group — Простое описание команды и расходов',
    subtitle: 'Кто у нас работает, сколько людей, какие зарплаты и какие ещё траты. Всё простыми словами.',
    sections: {
      intro: { title: '1) Коротко о главном' },
      hq:    { title: '2) Центральный офис: кто эти люди и чем занимаются' },
      cour:  { title: '3) Курьеры: доставка заказов' },
      retail:{ title: '4) Продавцы в наших магазинах' },
      totals:{ title: '5) Зарплаты всего за месяц' },
      opex:  { title: '6) Другие ежемесячные расходы' },
      grand: { title: '7) Общая сумма расходов за месяц' }
    },
    table: {
      role: 'Должность', people: 'Сколько человек', pay: 'Оклад в месяц, $', note: 'Заметка', subtotal: 'Сумма, $/мес',
      point: 'Магазин', count: 'Людей', wage: 'Оклад $', sum: 'Сумма $'
    },
    notes: {
      covered: 'Эта работа закрывается владельцем/операционным руководителем, отдельной зарплаты нет.',
      hqSum: 'Сумма зарплат людей из центрального офиса.',
      excl: 'Здесь нет закупочной цены товара и налогов.'
    },
    labels: {
      hqTotal: 'Зарплаты центрального офиса',
      courTotal: 'Зарплаты курьеров',
      retailTotal: 'Зарплаты продавцов',
      payrollTotal: 'ИТОГО зарплаты',
      expenses: 'ИТОГО другие расходы',
      grandTotal: 'ИТОГО (зарплаты + другие расходы)'
    },
    paragraphs: {
      intro1: 'Этот документ помогает спокойно и по‑человечески понять, из чего состоят наши ежемесячные расходы. Мы рассказываем простыми словами: кто у нас работает, чем они занимаются, сколько людей в каждой группе и какие у них зарплаты. Затем показываем другие обязательные траты — например, аренда, реклама и т.д.',
      intro2: 'Цифры округлены для удобства. Они нужны, чтобы быстро представить картину и принять понятные решения: где всё хорошо, а где можно улучшить работу или сэкономить.',
      hq1: 'Здесь собраны люди, которые помогают всей компании каждый день: наводят порядок, ведут учёт, общаются с поставщиками, следят за рекламой и поддерживают сотрудников. Без них магазины и продажи не работали бы стабильно.',
      hq2: 'Ниже список основных ролей. Если напротив роли стоит «—» в колонке «Сумма», значит для расчёта мы берём общую сумму по офису сразу, а не складываем построчно.',
      cour1: 'Курьеры — это те, кто привозит людям покупки вовремя и аккуратно. Их работа заметна клиенту больше всего. Для нас важно, чтобы курьеры были вежливыми, пунктуальными и знали город.',
      cour2: 'Мы считаем простую вещь: сколько у нас курьеров, какая у них зарплата и какая получается сумма в месяц.',
      retail1: 'В магазинах работают продавцы‑консультанты. Они помогают выбрать товар, рассказывают о новинках и отвечают на вопросы. Чем понятнее и теплее общение, тем выше доверие и тем больше довольных покупателей.',
      retail2: 'Ниже указано, сколько людей работает в каждой точке и какие у них оклады. Сумма по точке — это «количество людей × оклад».',
      totals1: 'Здесь собраны все зарплаты за месяц: офис, магазины и курьеры. Это самая важная часть расходов, потому что речь о людях и их работе.',
      totals2: 'Поддерживая понятную систему окладов и обязанностей, мы удерживаем сильную команду и качество обслуживания.',
      opex1: 'Кроме зарплат нам нужны и другие регулярные траты: аренда и коммунальные платежи, уборка, реклама в интернете и у блогеров, расходы на офис и программы.',
      opex2: 'Эти расходы помогают сотрудникам работать спокойно, а покупателям — получать хорошую службу и узнавать о наших предложениях.',
      grand1: 'В конце мы складываем две большие части: все зарплаты и все прочие расходы. Получается общая сумма в месяц — на неё мы можем опираться при планировании.',
      grand2: 'Если сумма кажется большой, важно помнить: она складывается из множества маленьких нужных вещей. Задача — держать баланс между качеством работы и экономией. Мы регулярно пересматриваем расходы: где можно оптимизировать, там ищем более простой и выгодный способ.'
    },
    words: { sum: 'Сумма', item: 'Расход', monthusd: 'Сумма за месяц, $' }
  } : {
    title: "Shafran Group — Jamoa va xarajatlar oddiy tilda",
    subtitle: "Kim ishlaydi, nechta odam bor, ish haqi qancha va yana qanday xarajatlar bor — barchasi sodda tilda.",
    sections: {
      intro: { title: "1) Eng muhimi qisqacha" },
      hq:    { title: "2) Markaziy ofis: bu odamlar nima ish qiladi" },
      cour:  { title: "3) Kuryerlar: buyurtmalarni yetkazish" },
      retail:{ title: "4) Do‘konlardagi sotuvchilar" },
      totals:{ title: "5) Oylik ish haqlari jami" },
      opex:  { title: "6) Boshqa oylik xarajatlar" },
      grand: { title: "7) Bir oy uchun umumiy summa" }
    },
    table: {
      role: "Lavozim", people: "Nechta odam", pay: "Oylik maosh, $", note: "Izoh", subtotal: "Jami, $/oy",
      point: "Do‘kon", count: "Odam", wage: "Maosh $", sum: "Jami $"
    },
    notes: {
      covered: "Bu vazifani egasi/rahbar bajaradi, alohida maosh yo‘q.",
      hqSum: "Markaziy ofis xodimlarining umumiy maoshi.",
      excl: "Bu yerda tovar tannarxi va soliqlar yo‘q."
    },
    labels: {
      hqTotal: "Markaziy ofis maoshlari",
      courTotal: "Kuryerlar maoshlari",
      retailTotal: "Do‘kon sotuvchilari maoshlari",
      payrollTotal: "MAOSH JAMI",
      expenses: "BOSHQA XARAJATLAR JAMI",
      grandTotal: "JAMI (maosh + boshqa)"
    },
    paragraphs: {
      intro1: "Bu hujjat oylik xarajatlarimizni oddiy va tushunarli qilib ko‘rsatadi. Kim ishlaydi, ularning soni nechta, maoshi qancha — barchasi aniq yozilgan. Shundan so‘ng boshqa majburiy xarajatlar ham keltirilgan: ijara, reklama va boshqalar.",
      intro2: "Raqamlar qulaylik uchun yaxlitlangan. Maqsad — umumiy holatni tez tushunish va to‘g‘ri qaror qabul qilish: qayerda hammasi yaxshi, qayerda yaxshilash yoki tejash mumkin.",
      hq1: "Bu yerda butun kompaniyaga yordam beradigan odamlar jamlangan: tartib va hisobot, yetkazib beruvchilar bilan aloqa, reklama, xodimlarga ko‘mak va hokazo. Ular bo‘lmasa do‘konlar ishini barqaror ushlab bo‘lmaydi.",
      hq2: "Quyida asosiy lavozimlar ro‘yxati bor. Agar «Jami» ustunida «—» tursa, demak hisoblashda biz darhol ofis bo‘yicha umumiy summadan foydalanamiz.",
      cour1: "Kuryerlar — xaridlarni mijozlarga vaqtida va ehtiyotkorlik bilan yetkazadigan odamlar. Ularning odobli va aniq ishlashi mijoz ko‘zida juda muhim.",
      cour2: "Hisoblash oddiy: nechta kuryer bor, ularning maoshi qancha va oyiga jami summa qanday chiqadi.",
      retail1: "Do‘konlarda sotuvchilar ishlaydi. Ular tovar tanlashga yordam beradi, savollarga javob beradi, yangiliklarni tushuntiradi. Qanchalik sodda va iliq muloqot bo‘lsa, shunchalik ishonch va mamnun mijozlar ko‘p bo‘ladi.",
      retail2: "Quyida har bir nuqtada nechta odam ishlashi va ularning oyligi keltirilgan. Jami: «odam soni × maosh».",
      totals1: "Bu yerda bir oy ichidagi barcha maoshlar jamlangan: ofis, do‘konlar va kuryerlar. Bu xarajatlarning eng muhim qismi — chunki gap odamlar va ularning mehnati haqida ketmoqda.",
      totals2: "Aniq maosh va vazifalar tartibi jamoani mustahkamlaydi va xizmat sifatini ushlab turadi.",
      opex1: "Maoshlardan tashqari, boshqa muntazam xarajatlar ham bor: ijara va kommunal to‘lovlar, tozalash, internet orqali reklama, blogerlar bilan ishlash, ofis xarajatlari va dasturlar.",
      opex2: "Bu xarajatlar xodimlarga xotirjam ishlashga, mijozlarga esa yaxshi xizmat olishga yordam beradi.",
      grand1: "Oxirida ikkita katta bo‘limni qo‘shamiz: barcha maoshlar va boshqa xarajatlar. Shunda bir oyga umumiy summa chiqadi — reja tuzishda shu raqamga tayanamiz.",
      grand2: "Agar summa kattadek tuyulsa, yodda tuting: u ko‘p mayda, lekin zarur bo‘lgan qismlardan yig‘iladi. Maqsad — sifat va tejamkorlik o‘rtasida muvozanatni ushlash. Biz xarajatlarni muntazam ko‘rib chiqamiz va soddaroq hamda foydaliroq yo‘lini izlaymiz."
    },
    words: { sum: "Jami", item: "Xarajat", monthusd: "Oyiga, $" }
  };

  // Numbers (unchanged)
  const hqRows = [
    { role: lang==='RU'?'Операционный директор (COO)':'Operatsion direktor', people: 1, payText: '$1,500–3,000' },
    { role: 'Area Supervisor', people: 1, payText: '$1,000–2,000' },
    { role: lang==='RU'?'Менеджер по опту':'Ulgurji menejer', people: 0, payText: '—', note: t.notes.covered },
    { role: lang==='RU'?'Менеджер по закупкам':'Xaridlar menejeri', people: 0, payText: '—', note: t.notes.covered },
    { role: lang==='RU'?'Кладовщик':'Omborchi', people: 1, payText: '$500–1,000' },
    { role: lang==='RU'?'IT и рассылки + диспетчер':'IT va bazalar + dispetcher', people: 1, payText: '$1,000–1,500' },
    { role: lang==='RU'?'Финансовый контролёр / главный бухгалтер':'Moliya nazoratchisi / bosh buxgalter', people: 1, payText: '$1,000' },
    { role: lang==='RU'?'HR и офис‑администратор':'HR va ofis administratori', people: 1, payText: '$600–1,000' },
    { role: lang==='RU'?'Руководитель маркетинга':'Marketing rahbari', people: 1, payText: '$1,500' },
    { role: lang==='RU'?'Интернет‑маркетолог (результаты)':'Internet marketolog', people: 1, payText: '$1,000' },
    { role: 'SMM', people: 1, payText: '$700' },
    { role: lang==='RU'?'Менеджер по рассылкам/возвратам':'Retention/rasmiy xatlar', people: 1, payText: '$800' },
    { role: lang==='RU'?'Видеооператор':'Videooperator', people: 1, payText: '$900' },
    { role: lang==='RU'?'Фотограф':'Fotograf', people: 1, payText: '$800' },
    { role: lang==='RU'?'Монтажёр видео / motion':'Video montaj / motion', people: 1, payText: '$900' },
    { role: lang==='RU'?'Дизайнер':'Dizayner', people: 1, payText: '$700' },
    { role: lang==='RU'?'Копирайтер / общение с сообществом':'Kopirayter / hamjamiyat', people: 1, payText: '$600' },
  ];

  const hqTotal = 14700;
  const couriers = { people: 2, pay: 600, total: 1200 };
  const retailRows = [
    { point: 'Shafran C5 — Парфюм', count: 2, wage: 900 },
    { point: 'Shafran C5 — Косметика', count: 2, wage: 700 },
    { point: 'O‘rikzor', count: 3, wage: 900 },
    { point: 'Stylord', count: 2, wage: 900 },
  ];
  const retailTotal = retailRows.reduce((s,r)=>s+r.count*r.wage,0);

  const otherExpenses = [
    { name: lang==='RU'?'Аренда и коммунальные платежи (магазины)':'Ijara va kommunal (do‘konlar)', amount: 7700 },
    { name: lang==='RU'?'Уборка':'Tozalash', amount: 300 },
    { name: 'Media (Meta/Google/Telegram)', amount: 7000 },
    { name: lang==='RU'?'Блогеры и лидеры мнений':'Blogerlar', amount: 3000 },
    { name: lang==='RU'?'Расходы на офис':'Ofis xarajatlari', amount: 1500 },
    { name: lang==='RU'?'Программы и онлайн‑сервисы':'Dastur va onlayn servislar', amount: 500 },
  ];
  const otherTotal = otherExpenses.reduce((s,e)=>s+e.amount,0);
  const payrollTotal = hqTotal + couriers.total + retailTotal;
  const grandTotal = payrollTotal + otherTotal;

  return { t,hqRows,hqTotal,couriers,retailRows,retailTotal,otherExpenses,otherTotal,payrollTotal,grandTotal };
}

function sectionHTML(number, title, subtitle, body) {
  return `
  <section class="slide">
    <div class="content">
      <div class="glass-card">
        <div class="section-title">
          <span class="section-number">${String(number).padStart(2,'0')}</span>
          <span>${title}</span>
        </div>
        ${subtitle ? `<div class="text" style="margin-bottom:18px">${subtitle}</div>` : ''}
        ${body}
      </div>
    </div>
  </section>`;
}

function buildSlidesHTML(data, lang) {
  const b1 = `
    <div class="highlight-box">✅ <span>${data.t.subtitle}</span></div>
    <p class="text">${data.t.paragraphs.intro1}</p>
    <p class="text">${data.t.paragraphs.intro2}</p>
    <div class="budget-item"><div class="budget-title">Зарплаты офиса / Ofis maoshi</div><div class="budget-amount">${usd(data.hqTotal)}</div></div>
    <div class="budget-item"><div class="budget-title">Зарплаты продавцов / Sotuvchilar maoshi</div><div class="budget-amount">${usd(data.retailTotal)}</div></div>
    <div class="budget-item"><div class="budget-title">Зарплаты курьеров / Kuryerlar maoshi</div><div class="budget-amount">${usd(data.couriers.total)}</div></div>
  `;

  const b2 = `
    <p class="text">${data.t.paragraphs.hq1}</p>
    <p class="text">${data.t.paragraphs.hq2}</p>
    <div class="table-wrap">
      <table class="glass-table">
        <thead>
          <tr>
            <th class="left">${data.t.table.role}</th>
            <th>${data.t.table.people}</th>
            <th>${data.t.table.pay}</th>
            <th>${data.t.table.note}</th>
            <th class="right">${data.t.table.subtotal}</th>
          </tr>
        </thead>
        <tbody>
          ${data.hqRows.map(r => `
            <tr>
              <td class="left">${r.role}</td>
              <td>${r.people}</td>
              <td>${r.payText}</td>
              <td class="muted">${r.note || '—'}</td>
              <td class="right">—</td>
            </tr>
          `).join('')}
          <tr class="total">
            <td class="left" colspan="4">${data.t.notes.hqSum}</td>
            <td class="right">${usd(data.hqTotal)}</td>
          </tr>
        </tbody>
      </table>
    </div>
  `;

  const b3 = `
    <p class="text">${data.t.paragraphs.cour1}</p>
    <p class="text">${data.t.paragraphs.cour2}</p>
    <div class="budget-item"><div class="budget-title">Сколько людей / Nechta odam</div><div class="budget-amount">${data.couriers.people}</div></div>
    <div class="budget-item"><div class="budget-title">Maosh / Оклад</div><div class="budget-amount">${usd(data.couriers.pay)}</div></div>
    <div class="budget-item"><div class="budget-title">${lang==='RU'?'Сумма за месяц':'Oylik jami'}</div><div class="budget-amount">${usd(data.couriers.total)}</div></div>
  `;

  const b4 = `
    <p class="text">${data.t.paragraphs.retail1}</p>
    <p class="text">${data.t.paragraphs.retail2}</p>
    <div class="table-wrap">
      <table class="glass-table">
        <thead>
          <tr>
            <th class="left">${data.t.table.point}</th>
            <th>${data.t.table.count}</th>
            <th>${data.t.table.wage}</th>
            <th class="right">${data.t.table.sum}</th>
          </tr>
        </thead>
        <tbody>
          ${data.retailRows.map(r => `
            <tr>
              <td class="left">${r.point}</td>
              <td>${r.count}</td>
              <td>${usd(r.wage)}</td>
              <td class="right">${usd(r.count * r.wage)}</td>
            </tr>
          `).join('')}
          <tr class="total">
            <td class="left" colspan="3">${lang==='RU'?'Итого продавцы':'Sotuvchilar jami'}</td>
            <td class="right">${usd(data.retailTotal)}</td>
          </tr>
        </tbody>
      </table>
    </div>
  `;

  const b5 = `
    <p class="text">${data.t.paragraphs.totals1}</p>
    <p class="text">${data.t.paragraphs.totals2}</p>
    <div class="budget-item"><div class="budget-title">${data.t.labels.hqTotal}</div><div class="budget-amount">${usd(data.hqTotal)}</div></div>
    <div class="budget-item"><div class="budget-title">${data.t.labels.retailTotal}</div><div class="budget-amount">${usd(data.retailTotal)}</div></div>
    <div class="budget-item"><div class="budget-title">${data.t.labels.courTotal}</div><div class="budget-amount">${usd(data.couriers.total)}</div></div>
    <div class="total-box"><div class="total-label">${data.t.labels.payrollTotal}</div><div class="total-amount">${usd(data.payrollTotal)}</div></div>
  `;

  const b6 = `
    <p class="text">${data.t.paragraphs.opex1}</p>
    <p class="text">${data.t.paragraphs.opex2}</p>
    <div class="table-wrap">
      <table class="glass-table">
        <thead>
          <tr>
            <th class="left">${lang==='RU'?'Расход':'Xarajat'}</th>
            <th class="right">${lang==='RU'?'Сумма за месяц, $':'Oyiga, $'}</th>
          </tr>
        </thead>
        <tbody>
          ${data.otherExpenses.map(e => `
            <tr>
              <td class="left">${e.name}</td>
              <td class="right">${usd(e.amount)}</td>
            </tr>
          `).join('')}
          <tr class="total">
            <td class="left">${data.t.labels.expenses}</td>
            <td class="right">${usd(data.otherTotal)}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="text" style="font-size:13px;opacity:.75">${data.t.notes.excl}</p>
  `;

  const b7 = `
    <p class="text">${data.t.paragraphs.grand1}</p>
    <p class="text">${data.t.paragraphs.grand2}</p>
    <div class="budget-item"><div class="budget-title">${data.t.labels.payrollTotal}</div><div class="budget-amount">${usd(data.payrollTotal)}</div></div>
    <div class="budget-item"><div class="budget-title">${data.t.labels.expenses}</div><div class="budget-amount">${usd(data.otherTotal)}</div></div>
    <div class="total-box"><div class="total-label">${data.t.labels.grandTotal}</div><div class="total-amount">${usd(data.grandTotal)}</div></div>
  `;

  const slides = [
    sectionHTML(1, data.t.sections.intro.title, data.t.subtitle, b1),
    sectionHTML(2, data.t.sections.hq.title, '', b2),
    sectionHTML(3, data.t.sections.cour.title, '', b3),
    sectionHTML(4, data.t.sections.retail.title, '', b4),
    sectionHTML(5, data.t.sections.totals.title, '', b5),
    sectionHTML(6, data.t.sections.opex.title, '', b6),
    sectionHTML(7, data.t.sections.grand.title, '', b7),
  ];
  return slides.join('');
}

const container = document.getElementById('container');
const slidesRoot = document.getElementById('slidesRoot');
const progressCircle = document.getElementById('progressCircle');
const progressText = document.getElementById('progressText');
const slideIndicator = document.getElementById('slideIndicator');
const circumference = 2 * Math.PI * 31;
progressCircle.style.strokeDasharray = circumference;
progressCircle.style.strokeDashoffset = circumference;

const langButtons = document.querySelectorAll('.lang-btn');
let lang = localStorage.getItem('preferredLanguage') || 'RU';

function setActiveLangButton() {
  langButtons.forEach(btn => {
    const bLang = btn.getAttribute('data-lang');
    btn.classList.toggle('active', bLang === lang);
  });
}

function renderSlides() {
  const data = buildData(lang);
  slidesRoot.innerHTML = buildSlidesHTML(data, lang);
  container.scrollTop = 0;
  updateIndicators();
  observeReveal();
}

function updateIndicators() {
  const pct = (container.scrollTop / (container.scrollHeight - container.clientHeight)) * 100;
  const off = circumference - (pct/100) * circumference;
  progressCircle.style.strokeDashoffset = off;
  progressText.textContent = isFinite(pct) ? Math.round(pct) + '%' : '0%';
  const slides = container.querySelectorAll('.slide');
  let cur = 1;
  slides.forEach((s, i) => {
    if (s.offsetTop - 20 <= container.scrollTop) cur = i + 1;
  });
  slideIndicator.textContent = String(cur).padStart(2,'0') + ' / ' + String(slides.length).padStart(2,'0');
}

function observeReveal() {
  const options = { threshold: 0.15, root: container, rootMargin: '0px 0px -80px 0px' };
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const t = entry.target;
        t.style.opacity = '1';
        t.style.transform = 'translateY(0) scale(1)';
      }
    });
  }, options);
  container.querySelectorAll('.content').forEach(c => observer.observe(c));
}

container.addEventListener('scroll', () => {
  updateIndicators();
  // Parallax blobs
  const scrolled = container.scrollTop;
  document.querySelectorAll('.blob').forEach((blob, index) => {
    const speed = (index + 1) * 0.1;
    blob.style.transform = 'translateY(' + (scrolled * speed) + 'px)';
  });
});

// Language switching
langButtons.forEach(button => {
  button.addEventListener('click', () => {
    lang = button.getAttribute('data-lang') || 'RU';
    localStorage.setItem('preferredLanguage', lang);
    setActiveLangButton();
    renderSlides();
  });
});

// Initial render
setActiveLangButton();
renderSlides();
  </script>
</body>
</html>
